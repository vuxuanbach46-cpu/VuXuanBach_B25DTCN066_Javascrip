<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    
  let tongYeuCau = 0;
  let thanhCong = 0;
  let biTuChoi = 0;
  let choXetDuyet = 0;

    while(true){
      let tiepTuc = prompt("Có yêu cầu mượn trước mới không (có / không)").trim().toLocaleLowerCase();
      if (!tiepTuc){
      break;
      }

      if(tiepTuc === "không"){
      alert("kết thúc ca");
      break;
      }

      if(tiepTuc !== "có"){
      alert("Vui lòng nhập có hoặc không");
      tongYeuCau++;
      continue ;
      }
      
      let soNgayCho;
    do {
      soNgayCho = Number(prompt("Nhập số ngày dự kiến chờ (>=1):"));
    } while (isNaN(soNgayCho) || soNgayCho < 1);

     let uuTien;
     do {
      uuTien = +(prompt(
      `Nhập mức ưu tiên:
      1 - Sinh viên
      2 - Giảng viên/NCS 
      3 - Nhân viên thư viện`
      ));
    } while (uuTien !== 1 && uuTien !== 2 && uuTien !== 3);

    if (soNgayCho > 45) {
      console.log("Từ chối: Thời gian chờ quá lâu (>45 ngày)");
      biTuChoi++;
    } 
    else if (uuTien === 3) {
      console.log("Đặt trước thành công - Ưu tiên đặc cách cao nhất");
      thanhCong++;
    } 
    else if (uuTien === 2 && soNgayCho <= 30) {
      console.log("Đặt trước thành công - Ưu tiên giảng viên/nghiên cứu");
      thanhCong++;
    } 
    else if (uuTien === 1 && soNgayCho <= 21) {
      console.log("Đặt trước thành công");
      thanhCong++;
    } 
    else {
      console.log("Đặt trước tạm thời - Chờ xét duyệt thêm");
      choXetDuyet++;
    }
  }

  alert(
  `BÁO CÁO CUỐI CA
  Tổng số yêu cầu:  ${tongYeuCau}
  Đặt thành công:  ${thanhCong}
  Bị từ chối:  ${biTuChoi}
  Chờ xét duyệt:  ${choXetDuyet} `
);
  </script>
</body>
</html>